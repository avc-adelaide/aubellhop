---
title: "Bellhop.py reading files"
format:
  html:
    code-fold: true
jupyter: python3
---

## File reading functions

While `bellhop.py` takes care of all file reading and writing procedures internally,
it can be useful when dealing with legacy Bellhop files or for testing different engines
to be able to directly read the various files used by Bellhop.

These fall into three classes:

1.  The environment file (`.env`) — special case
2.  Supplementary input files (`.ssp`, `.ati`, `.bty`, `.trc`, `.brc`, `.sbp`) — text-based arrays of data to augment the environment file
3.  The output files (`.arr`, `.ray`, `.shd`)

### Reading environment files

See [Bellhop.py environment configuration](environ.qmd) for full detail about the `Environment` class and its `.from_input()` class method.


### Reading input files

[TODO]


### Reading output files

Transmission loss files are stored in binary `.shd` files.

```{python}
#| label: fig-shd
#| fig-cap: "Reading a `.shd` binary output file and plotting the results."

import numpy as np
from bellhop.readers import read_shd
import matplotlib.pyplot as plt

df = read_shd("../../tests/MunkB_geo_rot/MunkB_geo_rot.shd")
X, Y = np.meshgrid(df.columns.values, df.index.values)
Z1 = df.values

plt.figure()
plt.pcolormesh(X, Y, abs(Z1), shading='nearest')
plt.colorbar(label='TL (abs)')
plt.xlabel('Range, m')
plt.ylabel('Depth, m')
plt.show()
```
